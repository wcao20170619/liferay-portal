{
  "blueprint-payload": {
    "configuration": {
      "highlight_configuration": {},
      "parameter_configuration": {},
      "sort_configuration": [],
      "aggregation_configuration": {
        "histogram-test": {
          "histogram": {
            "hard_bounds": {
              "min": 10,
              "max": 50
            },
            "field": "content_en_US_length_sortable",
            "interval": 10,
            "keyed": true,
            "min_doc_count": 1,
            "order": {
              "_count": "asc"
            }
          }
        },
        "significant_text-test": {
          "significant_text": {
            "field": "title_en_US",
            "enabled": false
          }
        },
        "avg_bucket-test": {
          "avg_bucket": {
            "gap_policy": "skip",
            "buckets_path": "pipeline_test_parent>content_lengths"
          }
        },
        "sum-test": {
          "sum": {
            "field": "content_en_US_length_sortable",
            "description": "Sum of all content lengths:"
          }
        },
        "bucket_script-test": {
          "date_histogram": {
            "date_histogram_interval": "minute",
            "field": "modified",
            "description": "Modifications histogram"
          },
          "aggs": {
            "content_lengths": {
              "sum": {
                "field": "content_en_US_length_sortable"
              }
            },
            "restaurants": {
              "filter": {
                "term": {
                  "assetTagNames.raw": "restaurant"
                }
              },
              "aggs": {
                "restaurant_content_lengths": {
                  "sum": {
                    "field": "content_en_US_length_sortable"
                  }
                }
              }
            },
            "bucket_script": {
              "bucket_script": {
                "buckets_path": {
                  "restaurantContentLengths": "restaurants>restaurant_content_lengths",
                  "totalContentLengths": "content_lengths"
                },
                "description": "Percentage content of restaurant-tagged content lengths of all content lenghts",
                "script": "params.restaurantContentLengths / params.totalContentLengths * 100"
              }
            }
          }
        },
        "nested-test": {
          "nested": {
            "path": "ddmFieldArray",
            "description": "Number of unique nested field values",
            "enabled": true
          },
          "aggs": {
            "nested-terms": {
              "terms": {
                "field": "ddmFieldArray.ddmFieldName"
              }
            }
          }
        },
        "top_hits-test": {
          "terms": {
            "field": "assetTagNames.raw",
            "size": 3
          },
          "aggs": {
            "top-hits": {
              "top_hits": {
                "explain": true,
                "highlight": {
                  "fields": {
                    "content${context.language_id}": {},
                    "title${context.language_id}": {}
                  },
                  "require_field_match": true,
                  "fragment_size": 50,
                  "snippet_size": 10
                },
                "doc_value_fields": [
                  "articleId"
                ],
                "size": 3,
                "track_scores": false,
                "from": 0,
                "_source": {
                  "includes": [
                    "title_en_US",
                    "articleId"
                  ]
                },
                "version": false
              }
            }
          }
        },
        "geohash_grid-test": {
          "geohash_grid": {
            "field": "expando__keyword__custom_fields__location_geolocation",
            "size": 10000,
            "precision": 3,
            "shard_size": 100
          }
        },
        "avg-test": {
          "avg": {
            "field": "content_en_US_length_sortable",
            "missing": 1
          }
        },
        "max-test": {
          "max": {
            "field": "content_en_US_length_sortable"
          }
        },
        "max_bucket-test": {
          "max_bucket": {
            "buckets_path": "pipeline_test_parent>content_lengths"
          }
        },
        "percentiles_bucket-test": {
          "percentiles_bucket": {
            "buckets_path": "pipeline_test_parent>content_lengths",
            "percents": [
              25,
              50,
              75
            ]
          }
        },
        "value_count-test": {
          "value_count": {
            "field": "assetTagNames.raw",
            "description": "Number of asset tag name values"
          }
        },
        "stats_bucket-test": {
          "stats_bucket": {
            "buckets_path": "pipeline_test_parent>content_lengths",
            "description": "Stats of the content lengths by modification per minute"
          }
        },
        "stats-test": {
          "stats": {
            "field": "content_en_US_length_sortable",
            "description": "Statistics for content length"
          }
        },
        "geo_centroid-test": {
          "geo_centroid": {
            "field": "expando__keyword__custom_fields__location_geolocation"
          }
        },
        "extended_stat_bucket-test": {
          "extended_stats_bucket": {
            "buckets_path": "pipeline_test_parent>content_lengths"
          }
        },
        "extended_stats-test": {
          "extended_stats": {
            "sigma": 3,
            "field": "content_en_US_length_sortable"
          }
        },
        "terms-test": {
          "terms": {
            "shard_min_doc_count": 1,
            "field": "assetTagNames.raw",
            "size": 10,
            "exclude": [
              "establishment"
            ],
            "shard_size": 1
          }
        },
        "geo_distance-test": {
          "geo_distance": {
            "unit": "mi",
            "field": "expando__keyword__custom_fields__location_geolocation",
            "ranges": [
              {
                "to": 8500,
                "key": "a"
              },
              {
                "from": 8500,
                "to": 11000,
                "key": "b"
              },
              {
                "from": 11000,
                "key": "c"
              }
            ],
            "origin": "41.8781,87.6298",
            "keyed": true
          }
        },
        "cardinality-test": {
          "cardinality": {
            "field": "assetTagNames.raw"
          }
        },
        "bucket_selector-test": {
          "date_histogram": {
            "date_histogram_interval": "minute",
            "field": "modified",
            "description": "Modifications histogram"
          },
          "aggs": {
            "bucket_selector": {
              "bucket_selector": {
                "buckets_path": {
                  "sumAllLengths": "content_lengths"
                },
                "script": "params.sumAllLengths > 140"
              }
            },
            "content_lengths": {
              "sum": {
                "field": "content_en_US_length_sortable"
              }
            }
          }
        },
        "serial_differencing-test": {
          "date_histogram": {
            "date_histogram_interval": "minute",
            "field": "modified",
            "description": "Modifications histogram"
          },
          "aggs": {
            "content_lengths": {
              "sum": {
                "field": "content_en_US_length_sortable"
              }
            },
            "serial_differencing": {
              "serial_differencing": {
                "lag": 30,
                "buckets_path": "content_lengths"
              }
            }
          }
        },
        "min-test": {
          "min": {
            "field": "content_en_US_length_sortable"
          }
        },
        "cumulative_sum-test": {
          "date_histogram": {
            "date_histogram_interval": "minute",
            "field": "modified",
            "description": "Modifications histogram"
          },
          "aggs": {
            "content_lengths": {
              "sum": {
                "field": "content_en_US_length_sortable"
              }
            },
            "cumulative_sum": {
              "cumulative_sum": {
                "buckets_path": "content_lengths"
              }
            }
          }
        },
        "reverse_nested-test": {
          "nested": {
            "path": "ddmFieldArray"
          },
          "aggs": {
            "reverse_nested-top_field_names": {
              "terms": {
                "field": "ddmFieldArray.ddmFieldName"
              },
              "aggs": {
                "reverse_nested-tags_to_content": {
                  "reverse_nested": {},
                  "aggs": {
                    "reverse_nested-tags_per_content": {
                      "terms": {
                        "field": "assetTagNames.raw"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "global-test": {
          "global": {}
        },
        "derivate_test": {
          "date_histogram": {
            "date_histogram_interval": "minute",
            "field": "modified",
            "description": "Modifications histogram"
          },
          "aggs": {
            "content_lengths": {
              "sum": {
                "field": "content_en_US_length_sortable"
              }
            },
            "derivative": {
              "derivative": {
                "buckets_path": "content_lengths"
              }
            }
          }
        },
        "moving_function-test": {
          "date_histogram": {
            "date_histogram_interval": "minute",
            "field": "modified",
            "description": "Modifications histogram"
          },
          "aggs": {
            "content_lengths": {
              "sum": {
                "field": "content_en_US_length_sortable"
              }
            },
            "moving_function": {
              "moving_function": {
                "buckets_path": "content_lengths",
                "window": 10,
                "script": "MovingFunctions.unweightedAvg(values)"
              }
            }
          }
        },
        "date_histogram-test": {
          "date_histogram": {
            "date_histogram_interval": "minute",
            "field": "modified",
            "keyed": true,
            "min_doc_count": 1,
            "order": {
              "_count": "asc"
            }
          }
        },
        "sum_bucket-test": {
          "sum_bucket": {
            "buckets_path": "pipeline_test_parent>content_lengths",
            "description": "Sum of the content lengths by modification per minute"
          }
        },
        "range-test": {
          "range": {
            "field": "content_en_US_length_sortable",
            "ranges": [
              {
                "to": 15
              },
              {
                "from": 15,
                "to": 25
              },
              {
                "from": 25
              }
            ],
            "missing": 1,
            "description": "Content length ranges",
            "keyed": true,
            "enabled": true
          }
        },
        "significant_terms-test": {
          "significant_terms": {
            "field": "assetTagNames.raw",
            "enabled": false
          }
        },
        "percentiles-test": {
          "percentiles": {
            "field": "content_en_US_length_sortable",
            "percents": [
              25,
              50,
              75,
              99
            ]
          }
        },
        "min_bucket-test": {
          "max_bucket": {
            "buckets_path": "pipeline_test_parent>content_lengths"
          }
        },
        "pipeline_test_parent": {
          "date_histogram": {
            "date_histogram_interval": "minute",
            "field": "modified",
            "description": "Modifications histogram"
          },
          "aggs": {
            "content_lengths": {
              "sum": {
                "field": "content_en_US_length_sortable"
              }
            }
          }
        },
        "missing-test": {
          "missing": {
            "field": "price"
          }
        },
        "geo_bounds-test": {
          "geo_bounds": {
            "field": "expando__keyword__custom_fields__location_geolocation",
            "wrap_longitude": true
          }
        },
        "date_range-test": {
          "date_range": {
            "field": "modified",
            "ranges": [
              {
                "from": "20200503000000",
                "to": "20210503000000",
                "key": "old-ones"
              },
              {
                "from": "20210503000000",
                "to": "20220503000000",
                "key": "new-ones"
              }
            ],
            "format": "yyyyMMddHHmmss",
            "keyed": true,
            "min_doc_count": 1
          }
        },
        "filter-test": {
          "filter": {
            "term": {
              "entryClassName": "com.liferay.journal.model.JournalArticle"
            }
          },
          "aggs": {
            "avg_content_length": {
              "avg": {
                "field": "content_en_US_length_sortable"
              }
            }
          }
        },
        "percentile_ranks-test": {
          "percentile_ranks": {
            "field": "content_en_US_length_sortable",
            "values": [
              10,
              20,
              30,
              40,
              50
            ]
          }
        },
        "scripted_metric-test": {
          "scripted_metric": {
            "init_script": "state.lengths = []",
            "map_script": "state.lengths.add(doc.content_en_US_length_sortable.value)",
            "combine_script": "int length = 0; for (t in state.lengths) { length += t } return length",
            "description": "Metrics: scripted metric",
            "params": {},
            "reduce_script": "int length = 0; for (a in states) { length += a } return length",
            "enabled": true
          }
        },
        "filters-test": {
          "filters": {
            "other_bucket": true,
            "other_bucket_key": "other_messages",
            "filters": {
              "blog-entries": {
                "term": {
                  "entryClassName": "com.liferay.blogs.model.BlogsEntry;"
                }
              },
              "journal-articles": {
                "term": {
                  "entryClassName": "com.liferay.journal.model.JournalArticle"
                }
              }
            }
          }
        },
        "weighted_avg-test": {
          "weighted_avg": {
            "description": "Weighted average of content length by version count",
            "weight": {
              "field": "versionCount_sortable"
            },
            "value": {
              "field": "content_en_US_length_sortable"
            }
          }
        }
      },
      "facet_configuration": {},
      "framework_configuration": {
        "clause_contributors": {
          "QueryPrefilterContributor": {
            "com.liferay.portal.search.internal.spi.model.query.contributor.UserIdQueryPreFilterContributor": false,
            "com.liferay.portal.search.internal.spi.model.query.contributor.AssetCategoryIdsQueryPreFilterContributor": false,
            "com.liferay.asset.internal.search.spi.model.query.contributor.AssetEntryModelPreFilterContributor": false,
            "com.liferay.portal.search.internal.spi.model.query.contributor.FolderIdQueryPreFilterContributor": false,
            "com.liferay.portal.search.internal.spi.model.query.contributor.AssetTagNamesQueryPreFilterContributor": false,
            "com.liferay.portal.search.internal.spi.model.query.contributor.LayoutQueryPreFilterContributor": false
          },
          "KeywordQueryContributor": {
            "com.liferay.dynamic.data.mapping.internal.search.spi.model.query.contributor.DDMStructureLayoutKeywordQueryContributor": false,
            "com.liferay.address.internal.search.spi.model.query.contributor.AddressKeywordQueryContributor": false,
            "com.liferay.portal.search.internal.spi.model.query.contributor.AssetTagNamesKeywordQueryContributor": false,
            "com.liferay.asset.categories.internal.search.spi.model.query.contributor.AssetVocabularyKeywordQueryContributor": false,
            "com.liferay.calendar.internal.search.spi.model.query.contributor.CalendarBookingKeywordQueryContributor": false,
            "com.liferay.dynamic.data.lists.internal.search.spi.model.query.contributor.DDLRecordSetKeywordQueryContributor": false,
            "com.liferay.calendar.internal.search.spi.model.query.contributor.CalendarKeywordQueryContributor": false,
            "com.liferay.document.library.internal.search.spi.model.query.contributor.DLFileEntryKeywordQueryContributor": false,
            "com.liferay.dynamic.data.mapping.internal.search.spi.model.query.contributor.DDMStructureKeywordQueryContributor": false,
            "com.liferay.asset.tags.internal.search.spi.model.query.contributor.AssetTagKeywordQueryContributor": false,
            "com.liferay.depot.internal.search.spi.model.query.contributor.DepotEntryKeywordQueryContributor": false,
            "com.liferay.organizations.internal.search.spi.model.query.contributor.OrganizationKeywordQueryContributor": false,
            "com.liferay.portal.search.internal.spi.model.query.contributor.AssetCategoryTitlesKeywordQueryContributor": false,
            "com.liferay.portal.search.internal.spi.model.query.contributor.DefaultKeywordQueryContributor": false,
            "com.liferay.layout.internal.search.spi.model.query.contributor.LayoutKeywordQueryContributor": false,
            "com.liferay.translation.internal.search.spi.model.query.contributor.TranslationEntryKeywordQueryContributor": false,
            "com.liferay.portal.workflow.kaleo.internal.search.spi.model.query.contributor.KaleoInstanceTokenKeywordQueryContributor": false,
            "com.liferay.data.engine.internal.search.spi.model.query.contributor.DEDataListViewKeywordQueryContributor": false,
            "com.liferay.portal.search.internal.spi.model.query.contributor.AlwaysPresentFieldsKeywordQueryContributor": false,
            "com.liferay.contacts.internal.search.spi.model.query.contributor.ContactKeywordQueryContributor": false,
            "com.liferay.portal.search.internal.spi.model.query.contributor.AssetInternalCategoryTitlesKeywordQueryContributor": false,
            "com.liferay.redirect.internal.search.spi.model.query.contributor.RedirectNotFoundEntryKeywordQueryContributor": false,
            "com.liferay.exportimport.internal.search.spi.model.query.contributor.ExportImportConfigurationKeywordQueryContributor": false,
            "com.liferay.users.admin.internal.search.spi.model.query.contributor.UserKeywordQueryContributor": false,
            "com.liferay.account.internal.search.spi.model.query.contributor.AccountGroupKeywordQueryContributor": false,
            "com.liferay.dynamic.data.mapping.internal.search.spi.model.query.contributor.DDMFormInstanceRecordKeywordQueryContributor": false,
            "com.liferay.dynamic.data.mapping.internal.search.spi.model.query.contributor.DDMTemplateKeywordQueryContributor": false,
            "com.liferay.redirect.internal.search.spi.model.query.contributor.RedirectEntryKeywordQueryContributor": false,
            "com.liferay.blogs.internal.search.spi.model.query.contributor.BlogsEntryKeywordQueryContributor": false,
            "com.liferay.asset.categories.internal.search.spi.model.query.contributor.AssetCategoryKeywordQueryContributor": false,
            "com.liferay.segments.internal.search.spi.model.query.contributor.SegmentsEntryKeywordQueryContributor": false,
            "com.liferay.account.internal.search.spi.model.query.contributor.AccountEntryKeywordQueryContributor": false
          },
          "ModelPrefilterContributor": {
            "com.liferay.portal.workflow.kaleo.internal.search.spi.model.query.contributor.KaleoInstanceModelPreFilterContributor": false,
            "com.liferay.calendar.internal.search.spi.model.query.contributor.CalendarBookingModelPreFilterContributor": false,
            "com.liferay.dynamic.data.mapping.internal.search.spi.model.query.contributor.DDMStructureModelPreFilterContributor": false,
            "com.liferay.message.boards.internal.search.spi.model.query.contributor.MBThreadModelPreFilterContributor": false,
            "com.liferay.data.engine.internal.search.spi.model.query.contributor.DEDataListViewModelPreFilterContributor": false,
            "com.liferay.organizations.internal.search.spi.model.query.contributor.OrganizationModelPreFilterContributor": false,
            "com.liferay.document.library.internal.search.spi.model.query.contributor.DLFolderModelPreFilterContributor": false,
            "com.liferay.asset.categories.internal.search.spi.model.query.contributor.AssetCategoryModelPreFilterContributor": false,
            "com.liferay.portal.workflow.kaleo.internal.search.spi.model.query.contributor.KaleoInstanceTokenModelPreFilterContributor": false,
            "com.liferay.account.internal.search.spi.model.query.contributor.OrganizationModelPreFilterContributor": false,
            "com.liferay.exportimport.internal.search.spi.model.query.contributor.ExportImportConfigurationModelPreFilterContributor": false,
            "com.liferay.account.internal.search.spi.model.query.contributor.UserModelPreFilterContributor": false,
            "com.liferay.bookmarks.internal.search.spi.model.query.contributor.BookmarksEntryModelPreFilterContributor": false,
            "com.liferay.portal.search.internal.spi.model.query.contributor.StagingModelPreFilterContributor": false,
            "com.liferay.dynamic.data.lists.internal.search.spi.model.query.contributor.DDLRecordSetModelPreFilterContributor": false,
            "com.liferay.users.admin.internal.search.spi.model.query.contributor.UserModelPreFilterContributor": false,
            "com.liferay.message.boards.internal.search.spi.model.query.contributor.MBCategoryModelPreFilterContributor": false,
            "com.liferay.account.internal.search.spi.model.query.contributor.AccountEntryModelPreFilterContributor": false,
            "com.liferay.dynamic.data.mapping.internal.search.spi.model.query.contributor.DDMStructureLayoutModelPreFilterContributor": false,
            "com.liferay.segments.internal.search.spi.model.query.contributor.UserModelPreFilterContributor": false,
            "com.liferay.layout.internal.search.spi.model.query.contributor.LayoutModelPreFilterContributor": false,
            "com.liferay.bookmarks.internal.search.spi.model.query.contributor.BookmarksFolderModelPreFilterContributor": false,
            "com.liferay.dynamic.data.mapping.internal.search.spi.model.query.contributor.DDMTemplateModelPreFilterContributor": false,
            "com.liferay.segments.internal.search.spi.model.query.contributor.SegmentsEntryModelPreFilterContributor": false,
            "com.liferay.object.internal.search.spi.model.query.contributor.ObjectEntryModelPreFilterContributor": false,
            "com.liferay.blogs.internal.search.spi.model.query.contributor.BlogsEntryModelPreFilterContributor": false,
            "com.liferay.portal.workflow.kaleo.internal.search.spi.model.query.contributor.KaleoLogModelPreFilterContributor": false,
            "com.liferay.portal.search.internal.spi.model.query.contributor.WorkflowStatusModelPreFilterContributor": false,
            "com.liferay.redirect.internal.search.spi.model.query.contributor.RedirectNotFoundEntryModelPreFilterContributor": false
          }
        },
        "searchable_asset_types": [
          "com.liferay.blogs.model.BlogsEntry",
          "com.liferay.bookmarks.model.BookmarksEntry",
          "com.liferay.bookmarks.model.BookmarksFolder",
          "com.liferay.calendar.model.CalendarBooking",
          "com.liferay.commerce.product.model.CPDefinition",
          "com.liferay.document.library.kernel.model.DLFileEntry",
          "com.liferay.document.library.kernel.model.DLFolder",
          "com.liferay.dynamic.data.lists.model.DDLRecord",
          "com.liferay.dynamic.data.mapping.model.DDMFormInstanceRecord",
          "com.liferay.journal.model.JournalArticle",
          "com.liferay.journal.model.JournalFolder",
          "com.liferay.knowledge.base.model.KBArticle",
          "com.liferay.message.boards.model.MBMessage",
          "com.liferay.portal.kernel.model.Layout",
          "com.liferay.portal.kernel.model.User",
          "com.liferay.wiki.model.WikiPage"
        ],
        "apply_indexer_clauses": true
      },
      "query_configuration": [],
      "advanced_configuration": {}
    },
    "description": {
      "en_US": "All supported aggregations test"
    },
    "selectedElements": {
      "query_configuration": []
    },
    "title": {
      "en_US": "Aggregations Test"
    }
  }
}